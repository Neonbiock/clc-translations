<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CLC Latin Translations</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .color-banner {
      width: 100%;
      height: 20px;
      margin-bottom: 20px;
      border-radius: 5px;
    }
    select, button {
      padding: 10px;
      margin: 10px 0;
      width: 100%;
      max-width: 500px;
    }
    #translation {
      background: white;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-top: 20px;
      white-space: pre-wrap;
    }
    .container {
      max-width: 700px;
      margin: auto;
    }
    hr {
      margin: 20px 0;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>CLC Latin Story Translations</h1>

    <div id="bookBanner" class="color-banner"></div>

    <!-- Book Selector -->
    <label for="book">Choose a Book:</label>
    <select id="book" onchange="updateBookColor(); updateStages();">
      <option value="">-- Select Book --</option>
      <option value="book1">Book I</option>
      <option value="book2">Book II</option>
      <option value="book3">Book III</option>
      <option value="book4">Book IV</option>
    </select>

    <!-- Stage Selector -->
    <label for="stage">Choose a Stage:</label>
    <select id="stage" onchange="updateStories()">
      <option value="">-- Select Stage --</option>
    </select>

    <!-- Story Selector -->
    <label for="story">Choose a Story:</label>
    <select id="story">
      <option value="">-- Select Story --</option>
    </select>

    <button onclick="showTranslation()">Show Translation</button>

    <div id="translation"></div>
  </div>

  <script>
    const bookColors = {
      book1: "#c62828", // red
      book2: "#1565c0", // blue
      book3: "#2e7d32", // green
      book4: "#6a1b9a", // purple
    };

    const stageNames = {
      stage1: "Stage 1: Caecilius",
      stage2: "Stage 2: in triclinio",
      stage13: "Stage 13: Coniuratio",
      stage21: "Stage 21: Thermopolium",
      // Add more here...
    };

    const bookStages = {
      book1: ["stage1", "stage2"], // up to stage12
      book2: ["stage13", "stage14"], // up to stage20
      book3: ["stage21", "stage22"], // up to stage28
      book4: [], // unreleased
    };

    const storyData = {
      stage1: {
        Cerberus: {
          latin: "Caecilius est in horto. Caecilius in horto sedet. Lucia est in horto.\nLucia in horto scribit. Metella est in atrio. Metella in atrio legit.\nQuintus est in tablino. Quintus in tablino scribit.\nCerberus est in via.\n\ncoquus est in culina. coquus in culina dormit. Cerberus intrat.\nCerberus circumspectat. cibus est in mensa. canis salit.\ncanis in mensa stat. Grumio stertit. canis latrat.\nGrumio surgit. coquus est iratus. 'pestis! furcifer!' coquus clamat.\nCerberus exit.",
          english: "Caecilius is in the garden. Caecilius sits in the garden. Lucia is in the garden.\nLucia writes in the garden. Metella is in the atrium. Metella reads in the atrium.\nQuintus is in the study. Quintus writes in the study.\nCerberus is in the street.\n\nThe cook is in the kitchen. The cook sleeps in the kitchen. Cerberus enters.\nCerberus looks around. The food is on the table. The dog jumps.\nThe dog stands on the table. Grumio snores. The dog barks.\nGrumio gets up. The cook is angry. 'Pest! Scoundrel!' the cook shouts.\nCerberus leaves."
        },
        inTablino: {
          latin: "Caecilius in tablino scribit.",
          english: "Caecilius is writing in the study."
        }
      },
      stage2: {
        amicus: {
          latin: "Amicus villam intrat.",
          english: "The friend enters the house."
        }
      },
      stage13: {
        coniuratio: {
          latin: "Salvius servos inspicit.",
          english: "Salvius inspects the slaves."
        }
      },
      stage21: {
        thermopolium: {
          latin: "Clemens ad thermopolium ambulavit.",
          english: "Clemens walked to the snack shop."
        }
      }
    };

    function updateBookColor() {
      const book = document.getElementById('book').value;
      const banner = document.getElementById('bookBanner');
      banner.style.backgroundColor = bookColors[book] || '#f4f4f4';
    }

    function updateStages() {
      const book = document.getElementById('book').value;
      const stageSelect = document.getElementById('stage');
      stageSelect.innerHTML = '<option value="">-- Select Stage --</option>';

      if (bookStages[book]) {
        bookStages[book].forEach(stage => {
          const option = document.createElement('option');
          option.value = stage;
          option.text = stageNames[stage] || stage;
          stageSelect.appendChild(option);
        });
      }
      updateStories(); // Clear stories if switching book
    }

    function updateStories() {
      const stage = document.getElementById('stage').value;
      const storySelect = document.getElementById('story');
      storySelect.innerHTML = '<option value="">-- Select Story --</option>';

      if (storyData[stage]) {
        for (let story in storyData[stage]) {
          const option = document.createElement('option');
          option.value = story;
          option.text = story.replace(/([A-Z])/g, ' $1').toLowerCase();
          storySelect.appendChild(option);
        }
      }
    }

    function showTranslation() {
      const stage = document.getElementById('stage').value;
      const story = document.getElementById('story').value;
      const data = storyData[stage]?.[story];

      if (!data) {
        document.getElementById('translation').innerText = "Translation not found.";
        return;
      }

      document.getElementById('translation').innerHTML =
        `<strong>LATIN</strong>\n${data.latin}\n<hr><strong>ENGLISH</strong>\n${data.english}`;
    }
  </script>

</body>
</html>
